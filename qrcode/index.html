<!DOCTYPE html>
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="jquery.1.11.3.min.js"></script>
<script src="jquery.qrcode.min.js"></script>
<style type="text/css">
	html,body{height:100%;margin: 0;}
	.urls {width: 100%; height: 50%;}
	.list {width: 90%; height: 50%;overflow: auto;border: 1px #ddd solid; background: #fff;padding: 1em;}
	.list li span {display: inline-block;width: 80%; vertical-align:middle;}
	.list li img {vertical-align:middle;}
	textarea {width: 90%; height: 95%;vertical-align: middle;margin-right: 1em;}
</style>
</head>
<body>
	<div class="urls"><textarea id="textarea"></textarea><button id="btnStart">开始</button></div>
	<div id="list" class="list"></div>
	<script>
		var textarea = $('#textarea');
		var btnStart = $('#btnStart');
		var list = $('#list');
		
		btnStart.on('click', function(){
			console.log(textarea.val().split('\n'));
			var urls = textarea.val().split('\n');
			var qrcode = [];
			var html = '';
			var base64 = [];
			for(var i=0,len=urls.length; i<len;i++){
				qrcode[i] = $('<div>');
				qrcode[i].qrcode({
					width: 256,
					height: 256,
					text: urls[i],
					render:'canvas'
				});
				//html[i] =$("<li><span>"+urls[i]+"</span><span>"+qrcode[i]+"</span></li>");
				base64[i] = qrcode[i].children()[0].toDataURL('image/jpeg');
				html +='<li><span>'+urls[i]+'</span><img src="'+base64[i]+'" width="20"></li>';
			};
			//console.log(html);
			list.html(html);
		})
		
		jQuery('.alert-qrcode .alert-title').qrcode({
			width: 256,
			height: 256,
			text: window.location.href,
			render:'canvas'
		});
	</script>
</body>
</html>
